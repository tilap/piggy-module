{"version":3,"sources":["Service.js"],"names":[],"mappings":"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","file":"Service.js","sourcesContent":["export default class Service {\n\n  constructor(manager) {\n    this._manager = manager;\n    this._context = {\n      user: null,\n      app: null\n    };\n  }\n\n  setUserContext(user=null) {\n    this._context.user = user;\n  }\n\n  hasUserContext() {\n    return this._context.user !== null;\n  }\n\n  setAppContext(app=null) {\n    this._context.app = app;\n  }\n\n  hasAppContext() {\n    return this._context.app !== null;;\n  }\n\n  createOneFromData(data) {\n    return new Promise((resolve, reject) => {\n      let vo = this._manager.getNewVo(data);\n      return this._manager.saveOne(vo)\n        .catch(err => {\n          return reject(err);\n        })\n        .then(user => {\n          resolve(user);\n        });\n    });\n  }\n\n  get(criteria={}, options={}) {\n    return this._manager.get(criteria, options);\n  }\n\n  getByPage(page=1, npp=10, orderby='username', order=1) {\n    let criteria = {};\n    let options = {};\n    return this.get(criteria, options);\n  }\n\n  getOneById(id) {\n    return this._manager.getOneById(id);\n  }\n\n  updateOneFromData(data, id) {\n    return new Promise((resolve, reject) => {\n      return this.getOneById(id).then( vo => {\n        if(null===vo) {\n          return reject ('not found');\n        }\n        vo.setData(data);\n        return resolve(vo);\n      })\n      .then( vo => {\n        return this._manager.saveOne(vo).then( vo => {\n          return resolve(vo);\n        });\n      });\n    });\n  }\n\n  deleteOneById(id) {\n    return new Promise((resolve, reject) => {\n      this.getOneById(id).then( vo => {\n        if(null===vo) {\n          return resolve(null);\n        }\n        this._manager.deleteOne(vo).then( success => {\n          return resolve(success===true);\n        });\n      });\n    });\n  }\n\n  get availableMethods() {\n    let childMethods = Object.getOwnPropertyNames(this.__proto__);\n    let OwnMethods = Object.getOwnPropertyNames(Service.prototype);\n\n    let methods = childMethods;\n    OwnMethods.forEach( method => {\n      if(methods.indexOf(method) < 0) {\n        methods.push(method);\n      }\n    });\n    return methods;\n  }\n}\n"],"sourceRoot":"/source/"}