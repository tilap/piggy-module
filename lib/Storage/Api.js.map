{"version":3,"sources":["Storage/Api.js"],"names":[],"mappings":"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","file":"Storage/Api.js","sourcesContent":["import AbstractStorage from './Abstract';\n\nexport default class ApiStorage extends AbstractStorage {\n\n  get(criteria = {}, options= {}) {\n    let method = 'get';\n    let path = '';\n    return this._runRequest(method, path)\n      .then( result => {\n        console.log('RESULT', result);\n        return result;\n      })\n      .catch( err => {\n        console.log('ERROR', err);\n        throw new Error(err.message);\n      });\n  }\n\n  insert(voData) {\n    let method = 'post';\n  }\n\n  update(criteria={}, newValues={}, options={}) {\n    let method = 'patch';\n  }\n\n  delete(criteria) {\n    let method = 'delete';\n  }\n\n  getFetcherOption() {\n    return {\n      method: 'get',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    };\n  }\n\n  _runRequest(method, path='', params=null) {\n    let url = this._collection + path;\n    let options = this.getFetcherOption();\n    if(params) {\n      options.body = JSON.stringify(params);\n    }\n    options.method = method;\n\n    return new Promise( (resolve, reject) => {\n      fetch(url, options)\n        .then(function(response) {\n          if (response.status > 200 || response.status < 300) {\n            return response;\n          }\n\n          var error = new Error(response.statusText)\n          error.response = response\n          return reject(error);\n        })\n        .then(response => {\n          return response.json();\n        })\n        .then( json => {\n          let errors= json.errors || null;\n          if(errors) {\n            return reject(errors); // @todo à améliorer => objet erreur ...\n          }\n\n          let data= json.data || [];\n          return resolve( data.map( item => item.attributes ));\n        })\n        .catch( (err) => {\n          return reject(err);\n        });\n    });\n  }\n}\n"],"sourceRoot":"/source/"}